# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –æ–ø–ª–∞—Ç—ã –∏–≥—Ä–æ–∫ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Ç—É—Ä–Ω–∏—Ä–∞
- –ò–≥—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–º–µ—Ç–∏–ª –∫–∞–∫ "–æ–ø–ª–∞—Ç–∏–ª", –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ
- –ò–≥—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–º–µ—Ç–∏–ª–∏ –∫–∞–∫ "–Ω–µ –æ–ø–ª–∞—Ç–∏–ª", –¥–æ–ª–∂–Ω—ã –∏—Å–∫–ª—é—á–∞—Ç—å—Å—è

**–°–æ–≥–ª–∞—Å–Ω–æ –¥–∏–∞–≥—Ä–∞–º–º–µ –ª–æ–≥–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–∞:**
1. –ò–≥—Ä–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è ‚Üí —Å—Ç–∞—Ç—É—Å `registered`
2. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—É ‚Üí —Å—Ç–∞—Ç—É—Å `paid`, **–∏–≥—Ä–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ**
3. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏—Å–∫–ª—é—á–∞–µ—Ç –Ω–µ–æ–ø–ª–∞—Ç–∏–≤—à–∏—Ö ‚Üí —Å—Ç–∞—Ç—É—Å `no_show`, –æ–Ω–∏ —É–¥–∞–ª—è—é—Ç—Å—è

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–§–∞–π–ª:** `server/models/Game.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∏–≥—Ä–æ–∫ –æ—Å—Ç–∞–ª—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `paid`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —á—Ç–æ –∏–≥—Ä–æ–∫ **–æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ**, —Ç–æ–ª—å–∫–æ –º–µ–Ω—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å

**–ö–æ–¥:**
```javascript
async confirmPayment(gameId, userId, adminId, paymentData) {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  const currentReg = await query(
    `SELECT * FROM game_registrations WHERE game_id = $1 AND user_id = $2`,
    [gameId, userId]
  );

  // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é - —Ç–µ–ø–µ—Ä—å –∏–≥—Ä–æ–∫ –æ–ø–ª–∞—Ç–∏–ª
  // –í–ê–ñ–ù–û: –ò–≥—Ä–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ, —Ç–æ–ª—å–∫–æ –º–µ–Ω—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å —Å 'registered' –Ω–∞ 'paid'
  const regResult = await query(
    `UPDATE game_registrations
     SET status = 'paid'
     WHERE game_id = $1 AND user_id = $2
     RETURNING *`,
    [gameId, userId]
  );

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–≥—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ—Å—Ç–∞–ª—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'paid'
  const verifyReg = await query(
    `SELECT * FROM game_registrations WHERE game_id = $1 AND user_id = $2`,
    [gameId, userId]
  );

  if (verifyReg.rows.length === 0) {
    throw new Error('Player was removed from tournament');
  }

  if (verifyReg.rows[0].status !== 'paid') {
    throw new Error(`Player status is ${verifyReg.rows[0].status}, expected "paid"`);
  }

  console.log('Payment confirmation completed successfully. Player remains in tournament with status "paid"');
  
  return registration;
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ò–≥—Ä–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
- ‚úÖ –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è —Å `registered` –Ω–∞ `paid`
- ‚úÖ –ò–≥—Ä–æ–∫ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞—Å—Å–∞–¥–∫–µ (–µ—Å–ª–∏ —Ç—É—Ä–Ω–∏—Ä –Ω–∞—á–∞–ª—Å—è)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

### 2. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

**–§–∞–π–ª:** `client/src/components/AdminCheckInView.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `selectedPlayer` –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö (300ms), —á—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä —É—Å–ø–µ–ª –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∏–≥—Ä–æ–∫ –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ "–û–ø–ª–∞—Ç–∏–ª–∏" –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ö–æ–¥:**
```typescript
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–º—è –∏–≥—Ä–æ–∫–∞ –¥–æ –æ—á–∏—Å—Ç–∫–∏
const playerName = selectedPlayer?.first_name || '–∏–≥—Ä–æ–∫–∞';

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
toast.success(`–û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –¥–ª—è ${playerName}`);

// –ó–∞–∫—Ä—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥ –∏ –æ—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
setIsPaymentDialogOpen(false);
setSelectedPlayer(null);

// –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, —á—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä —É—Å–ø–µ–ª –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
await new Promise(resolve => setTimeout(resolve, 300));

// –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
await loadData();

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–≥—Ä–æ–∫ —Ç–µ–ø–µ—Ä—å –≤ —Å–ø–∏—Å–∫–µ –æ–ø–ª–∞—Ç–∏–≤—à–∏—Ö
const updatedPlayers = await Promise.all([
  gamesAPI.getPlayersByStatus(game.id, 'paid').catch(() => [])
]);
const paidPlayers = updatedPlayers[0];
const playerFound = paidPlayers.find((p: any) => (p.user_id || p.id) === userId);

console.log('After payment confirmation:', {
  userId,
  playerFound: !!playerFound,
  totalPaidPlayers: paidPlayers.length
});

// –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –±—ã–ª –≤ —Ñ–∏–ª—å—Ç—Ä–µ "–û–∂–∏–¥–∞—é—Ç", –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ "–û–ø–ª–∞—Ç–∏–ª–∏"
if (filterStatus === 'registered') {
  setFilterStatus('paid');
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ò–≥—Ä–æ–∫ —Å—Ä–∞–∑—É –≤–∏–¥–µ–Ω –≤ —Å–ø–∏—Å–∫–µ "–û–ø–ª–∞—Ç–∏–ª–∏" –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–û–ø–ª–∞—Ç–∏–ª–∏"
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∏–≥—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ

---

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞

**–§–∞–π–ª:** `client/src/lib/api.ts`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `search` –±—ã–ª –≤ `userManagementAPI`, –Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –∫–∞–∫ `usersAPI.search`

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `search` –≤ `usersAPI`

**–ö–æ–¥:**
```typescript
export const usersAPI = {
  // ... –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã ...
  
  async search(query: string): Promise<User[]> {
    return fetchAPI(`/users/search?q=${encodeURIComponent(query)}`);
  },
};
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û—à–∏–±–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚úÖ –ú–µ—Ç–æ–¥ `usersAPI.search` —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω

---

## üìä –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã:

1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É"**
   - ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
   - ‚úÖ –ü–æ–ª–µ —Å—É–º–º—ã –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ `buy_in`

2. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç —Å—É–º–º—É –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"**
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã..."
   - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (—Å—É–º–º–∞ > 0, —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –≤—ã–±—Ä–∞–Ω)
   - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

3. **–°–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Å `registered` –Ω–∞ `paid` –≤ —Ç–∞–±–ª–∏—Ü–µ `game_registrations`
   - ‚úÖ –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `tournament_payments`
   - ‚úÖ **–í–ê–ñ–ù–û: –ò–≥—Ä–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ, —Ç–æ–ª—å–∫–æ –º–µ–Ω—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∏–≥—Ä–æ–∫ –æ—Å—Ç–∞–ª—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `paid`
   - ‚úÖ –ï—Å–ª–∏ —Ç—É—Ä–Ω–∏—Ä —É–∂–µ –Ω–∞—á–∞–ª—Å—è, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –º–µ—Å—Ç–æ –∏–≥—Ä–æ–∫—É

4. **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
   - ‚úÖ –ó–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
   - ‚úÖ –ó–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è toast "–û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞"
   - ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∞ 300ms –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ (`loadData()`)
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ –∏–≥—Ä–æ–∫ –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ "–û–ø–ª–∞—Ç–∏–ª–∏"
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä –Ω–∞ "–û–ø–ª–∞—Ç–∏–ª–∏"
   - ‚úÖ –ò–≥—Ä–æ–∫ —Å—Ä–∞–∑—É –≤–∏–¥–µ–Ω –≤ —Å–ø–∏—Å–∫–µ "–û–ø–ª–∞—Ç–∏–ª–∏"

### –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞:

1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞–∂–∏–º–∞–µ—Ç "–ò—Å–∫–ª—é—á–∏—Ç—å"**
   - ‚úÖ –ü–æ—è–≤–ª—è–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

2. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç**
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞..."
   - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

3. **–°–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**
   - ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `no_show` –≤ —Ç–∞–±–ª–∏—Ü–µ `game_registrations`
   - ‚úÖ –ò–≥—Ä–æ–∫ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ —Ç—É—Ä–Ω–∏—Ä–∞ (–Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞—Å—Å–∞–¥–∫–µ)

4. **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
   - ‚úÖ –ó–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è toast "–ò–≥—Ä–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω"
   - ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä –Ω–∞ "–ò—Å–∫–ª—é—á–µ–Ω—ã"
   - ‚úÖ –ò–≥—Ä–æ–∫ –≤–∏–¥–µ–Ω –≤ —Å–ø–∏—Å–∫–µ "–ò—Å–∫–ª—é—á–µ–Ω—ã"

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã:

1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å –ø—Ä–∏–µ–º–∞ –∏–≥—Ä–æ–∫–æ–≤
2. ‚úÖ –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–û–∂–∏–¥–∞—é—Ç"
3. ‚úÖ –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É" –¥–ª—è –∏–≥—Ä–æ–∫–∞
4. ‚úÖ –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5000)
5. ‚úÖ –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
6. ‚úÖ –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã..."
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è toast "–û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞"
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–û–ø–ª–∞—Ç–∏–ª–∏"
- ‚úÖ –ò–≥—Ä–æ–∫ –≤–∏–¥–µ–Ω –≤ —Å–ø–∏—Å–∫–µ "–û–ø–ª–∞—Ç–∏–ª–∏"
- ‚úÖ –°—Ç–∞—Ç—É—Å –∏–≥—Ä–æ–∫–∞: –∑–µ–ª–µ–Ω—ã–π badge "–û–ø–ª–∞—Ç–∏–ª"
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—É–º–º–∞ –æ–ø–ª–∞—Ç—ã
- ‚úÖ **–ò–≥—Ä–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ –∏ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞—Å—Å–∞–¥–∫–µ**

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
```
Confirming payment: { gameId, userId, amount, ... }
Payment confirmed successfully: { ... }
After payment confirmation: {
  userId: 123,
  playerFound: true,
  totalPaidPlayers: 5,
  paidPlayers: [...]
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ (Render Dashboard ‚Üí Logs):

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
```
Confirm payment request: { gameId, userId, amount, ... }
Admin found: 1
Game.confirmPayment called: { gameId, userId, ... }
Current registration status: registered
Registration updated to paid: { id, game_id, user_id, status: 'paid' }
Payment confirmation completed successfully. Player remains in tournament with status "paid": {
  registrationId: 123,
  userId: 456,
  status: 'paid'
}
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –≤—Å–µ –µ—â–µ —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:**
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: "Payment confirmation completed successfully. Player remains in tournament with status 'paid'"
   - –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞ "Player was removed from tournament" - –∑–Ω–∞—á–∏—Ç, —á—Ç–æ-—Ç–æ —É–¥–∞–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `playerFound: true` –≤ –ª–æ–≥–∞—Ö "After payment confirmation"
   - –ï—Å–ª–∏ `playerFound: false` - –∑–Ω–∞—á–∏—Ç, –∏–≥—Ä–æ–∫ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–ø–∏—Å–æ–∫ "–û–ø–ª–∞—Ç–∏–ª–∏"

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ SQL –∑–∞–ø—Ä–æ—Å—ã:**
   ```sql
   -- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–≥—Ä–æ–∫ –æ—Å—Ç–∞–ª—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ
   SELECT * FROM game_registrations 
   WHERE game_id = <game_id> AND user_id = <user_id>;
   
   -- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞—Ç—É—Å 'paid'
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç –≤ –∫–æ–¥–µ, –∫–æ—Ç–æ—Ä—ã–µ —É–¥–∞–ª—è—é—Ç –∏–≥—Ä–æ–∫–æ–≤:**
   - –ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É: `DELETE FROM game_registrations`
   - –ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É: `status = 'cancelled'` –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Å—Ç–∞—Ç—É—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–∫–ª—é—á–∞—é—Ç –∏–≥—Ä–æ–∫–∞

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `server/models/Game.js`
   - `confirmPayment()` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∏–≥—Ä–æ–∫ –æ—Å—Ç–∞–ª—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ —Ç–æ–º, —á—Ç–æ –∏–≥—Ä–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ

2. ‚úÖ `client/src/components/AdminCheckInView.tsx`
   - `handlePaymentSubmit()` - —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∏–≥—Ä–æ–∫ –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ "–û–ø–ª–∞—Ç–∏–ª–∏"
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `selectedPlayer` –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏

3. ‚úÖ `client/src/lib/api.ts`
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `search()` –≤ `usersAPI`

---

## üéØ –°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã:
- ‚úÖ –ò–≥—Ä–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
- ‚úÖ –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è —Å `registered` –Ω–∞ `paid`
- ‚úÖ –ò–≥—Ä–æ–∫ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞—Å—Å–∞–¥–∫–µ
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —á—Ç–æ –∏–≥—Ä–æ–∫ –æ—Å—Ç–∞–ª—Å—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, —á—Ç–æ –∏–≥—Ä–æ–∫ –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ "–û–ø–ª–∞—Ç–∏–ª–∏"

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π!

