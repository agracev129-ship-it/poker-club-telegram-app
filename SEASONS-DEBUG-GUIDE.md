# üîç –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ—Ç–ª–∞–¥–∫–µ —Å–∏—Å—Ç–µ–º—ã —Å–µ–∑–æ–Ω–æ–≤ —Ä–µ–π—Ç–∏–Ω–≥–∞

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **`Game.create()`** - –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `season_id` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—É—Ä–Ω–∏—Ä–∞
2. **`CreateTournamentView`** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å –ø—É—Å—Ç—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –≤ Select
3. **`RatingTab`** - –¥–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–µ–∑–æ–Ω–∞
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ API endpoint `/api/rating-seasons/:id/leaderboard`

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ pgAdmin –∏–ª–∏ psql

–ó–∞–ø—É—Å—Ç–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç `test-seasons.sql` –≤ –≤–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```bash
# –ß–µ—Ä–µ–∑ psql
psql "YOUR_DATABASE_URL" -f test-seasons.sql

# –ò–ª–∏ —á–µ—Ä–µ–∑ pgAdmin: –æ—Ç–∫—Ä–æ–π—Ç–µ test-seasons.sql –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∑–æ–Ω—ã
- –¢—É—Ä–Ω–∏—Ä—ã –∏ –∏—Ö –ø—Ä–∏–≤—è–∑–∫—É –∫ —Å–µ–∑–æ–Ω–∞–º
- –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤ –ø–æ —Å–µ–∑–æ–Ω–∞–º
- –†–µ–π—Ç–∏–Ω–≥–∏ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–º —Å–µ–∑–æ–Ω–µ

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–†–µ–π—Ç–∏–Ω–≥"
2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω** –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–µ–∑–æ–Ω–æ–≤ –∞–∫—Ç–∏–≤–Ω—ã–º
3. **–°–æ–∑–¥–∞–π—Ç–µ —Ç—É—Ä–Ω–∏—Ä** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å–µ–∑–æ–Ω –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
4. **–ü—Ä–æ–≤–µ–¥–∏—Ç–µ —Ç—É—Ä–Ω–∏—Ä** –¥–æ –∫–æ–Ω—Ü–∞
5. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "–†–µ–π—Ç–∏–Ω–≥"** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
6. **–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–∑–æ–Ω** –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
7. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–≥—Ä–æ–∫–∏ —Å –æ—á–∫–∞–º–∏ –∏–∑ —ç—Ç–æ–≥–æ —Å–µ–∑–æ–Ω–∞

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞ –∏ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤–∫–ª–∞–¥–∫–∏ "–†–µ–π—Ç–∏–Ω–≥" –≤ –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:

```
üìä Fetching leaderboard for season 2...
‚úÖ Season found: –°–µ–∑–æ–Ω 2
üéÆ Games in season 2: 3
   - Game 45: –¢–£–†–ù–ò–† #12 (season_id: 2)
   - Game 44: –¢–£–†–ù–ò–† #11 (season_id: 2)
   - Game 43: –¢–£–†–ù–ò–† #10 (season_id: 2)
‚úÖ Leaderboard for season 2: 15 players
   1. –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤: 450 pts (3 games)
   2. –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞: 380 pts (3 games)
   ...
```

## üêõ –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –¢—É—Ä–Ω–∏—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑ —Å–µ–∑–æ–Ω–∞ (`season_id = null`)

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –≤—ã–±—Ä–∞–Ω —Å–µ–∑–æ–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—É—Ä–Ω–∏—Ä–∞  
**–†–µ—à–µ–Ω–∏–µ:** 
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–µ–∑–æ–Ω
- –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–∑–æ–Ω –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—É—Ä–Ω–∏—Ä–∞
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–π —Å–µ–∑–æ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –†–µ–π—Ç–∏–Ω–≥ –ø—É—Å—Ç–æ–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–µ–∑–æ–Ω–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –í —ç—Ç–æ–º —Å–µ–∑–æ–Ω–µ –µ—â–µ –Ω–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–∞  
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç—É—Ä–Ω–∏—Ä—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –Ω—É–∂–Ω–æ–º—É —Å–µ–∑–æ–Ω—É (–∑–∞–ø—Ä–æ—Å #2 –∏–∑ test-seasons.sql)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç—É—Ä–Ω–∏—Ä—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã –∏ –æ—á–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –û—á–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω—ã, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–µ–∑–æ–Ω–µ

**–ü—Ä–∏—á–∏–Ω–∞:** –¢—É—Ä–Ω–∏—Ä –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Å–µ–∑–æ–Ω—É –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è  
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `season_id` —É —Ç—É—Ä–Ω–∏—Ä–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ï—Å–ª–∏ `null`, –∑–Ω–∞—á–∏—Ç —Ç—É—Ä–Ω–∏—Ä —Å–æ–∑–¥–∞–Ω –±–µ–∑ —Å–µ–∑–æ–Ω–∞ (–Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å)

## üìä SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ç—É—Ä–Ω–∏—Ä—ã –∏ –∏—Ö —Å–µ–∑–æ–Ω—ã:
```sql
SELECT g.id, g.name, g.season_id, rs.name as season_name
FROM games g
LEFT JOIN rating_seasons rs ON g.season_id = rs.id
ORDER BY g.id DESC;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ–∑–æ–Ω–∞ (ID = 2):
```sql
SELECT 
  u.first_name,
  u.last_name,
  SUM(gr.points_earned) as total_points
FROM game_registrations gr
JOIN games g ON gr.game_id = g.id
JOIN users u ON gr.user_id = u.id
WHERE g.season_id = 2 
  AND gr.registration_status = 'participated'
GROUP BY u.id, u.first_name, u.last_name
ORDER BY total_points DESC;
```

### –í—Ä—É—á–Ω—É—é –ø—Ä–∏–≤—è–∑–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä –∫ —Å–µ–∑–æ–Ω—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```sql
-- –ü—Ä–∏–≤—è–∑–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä #45 –∫ —Å–µ–∑–æ–Ω—É #2
UPDATE games SET season_id = 2 WHERE id = 45;
```

## üéØ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –°–µ–∑–æ–Ω—ã —Å–æ–∑–¥–∞–Ω—ã –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- [ ] –û–¥–∏–Ω —Å–µ–∑–æ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω—ã–π
- [ ] –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—É—Ä–Ω–∏—Ä–∞ –≤—ã–±—Ä–∞–Ω —Å–µ–∑–æ–Ω
- [ ] –¢—É—Ä–Ω–∏—Ä –ø—Ä–æ–≤–µ–¥–µ–Ω –¥–æ –∫–æ–Ω—Ü–∞ (—Å—Ç–∞—Ç—É—Å = 'finished')
- [ ] –û—á–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω—ã –∏–≥—Ä–æ–∫–∞–º (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ game_registrations)
- [ ] –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É —Ç—É—Ä–Ω–∏—Ä–∞ —É–∫–∞–∑–∞–Ω season_id
- [ ] –í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ –≤–∏–¥–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ /api/rating-seasons/:id/leaderboard
- [ ] –í –∫–ª–∏–µ–Ω—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–†–µ–π—Ç–∏–Ω–≥" –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–≥—Ä–æ–∫–∏

## üìû –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞

–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
1. –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏ "–†–µ–π—Ç–∏–Ω–≥"
2. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ test-seasons.sql
3. –°–∫—Ä–∏–Ω—à–æ—Ç –≤–∫–ª–∞–¥–∫–∏ "–†–µ–π—Ç–∏–Ω–≥" –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
4. ID —Å–µ–∑–æ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–±—Ä–∞–Ω –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ

