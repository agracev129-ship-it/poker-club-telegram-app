# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è - –†–∞—É–Ω–¥ 2

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∞—Å—å –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è" –∫–Ω–æ–ø–∫–∞ –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ "–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å", –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –±—ã–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω.

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ –≤—ã–∑—ã–≤–∞–ª—Å—è –º–µ—Ç–æ–¥ `refreshRegistration()`, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `refreshRegistration()` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–æ—Ç–º–µ–Ω—ã
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–≥—Ä `refreshGames()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –¢–µ–ø–µ—Ä—å –∫–Ω–æ–ø–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" –∏–ª–∏ "–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å"

**–§–∞–π–ª:** `client/src/components/GamesTab.tsx`

### 2. ‚úÖ –í–∫–ª–∞–¥–∫–∞ "–ò–≥—Ä–æ–∫–∏" –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å (–æ—à–∏–±–∫–∞ "Failed to fetch friends")

**–ü—Ä–æ–±–ª–µ–º–∞:** API –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/users/friends` –∏ `/api/users/friend-requests` –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏.

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–∞—Ä—à—Ä—É—Ç—ã Express –±—ã–ª–∏ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –ú–∞—Ä—à—Ä—É—Ç `GET /api/users/` –±—ã–ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –ü–ï–†–ï–î –º–∞—Ä—à—Ä—É—Ç–∞–º–∏ `/friends` –∏ `/friend-requests`, –ø–æ—ç—Ç–æ–º—É Express –¥—É–º–∞–ª, —á—Ç–æ `friends` - —ç—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä user ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, `GET /api/users/:id`).

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏ –º–∞—Ä—à—Ä—É—Ç—ã `/friends` –∏ `/friend-requests` –í–´–®–ï –º–∞—Ä—à—Ä—É—Ç–∞ `GET /`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ —Ç–∞–±–ª–∏—Ü–∞ `friendships` –µ—â–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏)
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º

**–§–∞–π–ª:** `server/routes/users.js`

---

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é:

### –í–ê–ñ–ù–û: –ü–æ—Ä—è–¥–æ–∫ —à–∞–≥–æ–≤ –∫—Ä–∏—Ç–∏—á–µ–Ω!

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env (–ï–°–õ–ò –ï–©–ï –ù–ï –°–û–ó–î–ê–õ–ò)

–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `client` —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```
VITE_API_URL=https://poker-club-backend-tb4h.onrender.com/api
```

### –®–∞–≥ 2: –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

```powershell
cd c:\Users\grach\source\repos\NBKapp\poker-club-telegram-app\client
npm run build
```

### –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Desktop:
1. –û—Ç–∫—Ä–æ–π—Ç–µ GitHub Desktop
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `poker-club-mini-app`
3. –í—ã —É–≤–∏–¥–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
   - `client/src/components/PlayersView.tsx`
   - `client/src/components/GamesTab.tsx`
   - `server/routes/users.js`
   - `FIXES-ROUND-2.md` (–Ω–æ–≤—ã–π)
4. Summary: `Fix tournament registration button and players API routing`
5. Description:
   ```
   - Fixed tournament registration button not updating after join/cancel
   - Fixed API routing for /friends and /friend-requests endpoints
   - Added graceful handling for missing friendships table
   - Improved error logging in PlayersView
   ```
6. –ù–∞–∂–º–∏—Ç–µ "Commit to main"
7. –ù–∞–∂–º–∏—Ç–µ "Push origin"

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Render (Frontend)

**–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞** (–µ—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å—Ç–µ):

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [Render.com](https://render.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à **Frontend —Å–µ—Ä–≤–∏—Å**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Environment**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ:
   - **Key:** `VITE_API_URL`
   - **Value:** `https://poker-club-backend-tb4h.onrender.com/api`
5. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å—Ç–µ –∏ –Ω–∞–∂–º–∏—Ç–µ **Save Changes**

### –®–∞–≥ 5: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –¥—Ä—É–∑–µ–π (–í–ê–ñ–ù–û!)

–ü–æ—Å–ª–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è backend:

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [Render.com](https://render.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à **Backend —Å–µ—Ä–≤–∏—Å** (poker-club-backend-tb4h)
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **Shell**
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
   ```bash
   node init-friends-table.js
   ```
5. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å: `Friendships table initialized successfully.`
6. **–≠–¢–£ –ö–û–ú–ê–ù–î–£ –ù–£–ñ–ù–û –í–´–ü–û–õ–ù–ò–¢–¨ –¢–û–õ–¨–ö–û –û–î–ò–ù –†–ê–ó!**

### –®–∞–≥ 6: –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

Frontend –∏ Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤—è—Ç—Å—è –ø–æ—Å–ª–µ push –≤ GitHub. –≠—Ç–æ –∑–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç.

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ö–Ω–æ–ø–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä—ã
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–¢—É—Ä–Ω–∏—Ä—ã"
3. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è" –Ω–∞ –ª—é–±–æ–º —Ç—É—Ä–Ω–∏—Ä–µ
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–Ω–æ–ø–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ "–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å" —Å –≥–∞–ª–æ—á–∫–æ–π
5. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å"
6. –ö–Ω–æ–ø–∫–∞ –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è"

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –í–∫–ª–∞–¥–∫–∞ "–ü–æ—Å–∞–¥–∫–∞"
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Ç—É—Ä–Ω–∏—Ä —á–µ—Ä–µ–∑ "–¢—É—Ä–Ω–∏—Ä—ã"
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –ì–ª–∞–≤–Ω—É—é
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–æ—Å–∞–¥–∫–∞"
4. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–æ–ª–µ –∏ –º–µ—Å—Ç–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –í–∫–ª–∞–¥–∫–∞ "–ò–≥—Ä–æ–∫–∏"
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ò–≥—Ä–æ–∫–∏" (–∏–∫–æ–Ω–∫–∞ —Å –ª—é–¥—å–º–∏)
2. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤–∫–ª–∞–¥–∫–∏: "–í—Å–µ", "–î—Ä—É–∑—å—è (0)", "–ó–∞–ø—Ä–æ—Å—ã (0)"
3. –ù–∞ –≤–∫–ª–∞–¥–∫–µ "–í—Å–µ" –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (–µ—Å–ª–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ –≤ web) –∏–ª–∏ –ª–æ–≥–∏ –Ω–∞ Render

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:

### –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –≤—Å–µ –µ—â–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12 –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
4. –ü—Ä–∏—à–ª–∏—Ç–µ –º–Ω–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –æ—à–∏–±–æ–∫

### –ï—Å–ª–∏ –∏–≥—Ä–æ–∫–∏ –≤—Å–µ –µ—â–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ `node init-friends-table.js` –Ω–∞ Backend
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ –∫–æ–Ω—Å–æ–ª–∏ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `https://poker-club-backend-tb4h.onrender.com/api`)
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://poker-club-backend-tb4h.onrender.com/api/users`
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ JSON —Å error 401 - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ "Route not found" –∏–ª–∏ 500 - –ø—Ä–æ–±–ª–µ–º–∞ —Å Backend

### –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ friendships –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Backend –Ω–∞ Render (–≤–∫–ª–∞–¥–∫–∞ Logs)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DATABASE_URL` (Internal) –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–Ω–æ–≤–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `node init-friends-table.js`

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

### –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ –≤ –∫–æ–¥–µ:

**client/src/components/GamesTab.tsx:**
```typescript
// –î–æ–±–∞–≤–ª–µ–Ω–æ:
const { games, loading, refreshGames } = useGames({ status: 'upcoming' });
const { isRegistered: isAPIRegistered, toggleRegistration, refreshRegistration } = useGameRegistration(selectedGame?.id || 0);

// –í handleToggleRegistration:
await toggleRegistration();
localToggle(selectedGame.id);
await refreshRegistration(); // –ù–û–í–û–ï
refreshGames(); // –ù–û–í–û–ï
```

**client/src/components/PlayersView.tsx:**
```typescript
// –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
console.log('Loading players data...');
console.log('API URL:', import.meta.env.VITE_API_URL || 'http://localhost:3001/api');
console.log('1. Loading all users...');
// ... –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –ª—É—á—à–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
```

**server/routes/users.js:**
```javascript
// –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤:
// –ë–´–õ–û:
router.get('/leaderboard', ...);
router.get('/', ...);  // ‚Üê –≠—Ç–æ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª /friends
router.get('/friends', ...);  // ‚Üê –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è

// –°–¢–ê–õ–û:
router.get('/leaderboard', ...);
router.get('/friends', ...);  // ‚Üê –¢–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
router.get('/friend-requests', ...);  // ‚Üê –¢–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
router.get('/', ...);  // ‚Üê –¢–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –ø—É—Ç–∏

// –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã:
if (error.message?.includes('relation "friendships" does not exist')) {
  console.warn('Friendships table does not exist. Run init-friends-table.js');
  return res.json([]);
}
```

---

**–í—Å–µ –≥–æ—Ç–æ–≤–æ!** –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:
- ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è
- ‚úÖ –í–∫–ª–∞–¥–∫–∞ "–ò–≥—Ä–æ–∫–∏" –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥—Ä—É–∑–µ–π –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –í–∫–ª–∞–¥–∫–∞ "–ü–æ—Å–∞–¥–∫–∞" –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –º–µ—Å—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã - –ø—Ä–∏—à–ª–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –æ—à–∏–±–∫–∏ –∏ —Ç–µ–∫—Å—Ç –∏–∑ –∫–æ–Ω—Å–æ–ª–∏!

